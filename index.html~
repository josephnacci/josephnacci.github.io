<!DOCTYPE html>
<html lang="en">
    <head>

        <!--<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>-->


        <!-- Styles for our vis  -->
	<style>
        body {
            font: 15px sans-serif;
        }

	li{
  margin: 7px 0;
}
        .axis path,
        .axis line {
            fill: none;
            stroke: #000;
            shape-rendering: crispEdges;

        }
	.line{
stroke:dimgrey;
stroke-width:5px;
}
	
	.text {
            font-family: sans-serif;
            font-size: 11px;
       }

        .dot {
            stroke: none;
        }
        .tooltip {
            position: absolute;
            font-size: 12px;
            width:  auto;
            height: auto;
            pointer-events: none;
            background-color: white;
        }
         </style>
    <script src="jquery.js"></script> 
    <script> 
    $(function(){
      $("#includedContent").load("list.html"); 
    });
    </script> 

    </head>


    <body style="background-color:rgba(250, 235, 215, .7);">
      <image src="./logo.png" style="width:10%;"></image>
	<center>
	  <div max-width="60%;">
	    <h4>Potential for Green Mountain Energy Products in Price Chopper: How much more or less do Price Chopper shoppers care about climate change vs. the average shopper?</h4>
            <iframe id="ifm" name="ifm" width="60%" height="500px" frameborder="0" src="https://nacci.sisense.com/app/main#/dashboards/5c993ac4df6099058808e926/widgets/5c99450edf6099058808e92c/?embed=true" scrolling="auto"></iframe>
	    <br>
	    <p style="width:60%;">The size of the circles on this map correspond to the relative number of Price Chopper shoppers in the northeastern states. The color of the circles represents the over/under index compared to overall climate sentiment in each state. So the larger the green circle, the greater the opportunity for Green Mountain Energy specifically for Price Chopper shoppers. The smaller, red circles represent less of an opportunity.</p>
	    <br><br>
	    <h4>What brands to Price Chopper shoppers use most often?</h4>
            <iframe id="ifm" name="ifm" width="60%" height="500px" frameborder="0" src="https://nacci.sisense.com/app/main#/dashboards/5c993ac4df6099058808e926/widgets/5c99a0ecdf6099058808e933/?embed=true" scrolling="auto"></iframe>
	    <p style="width:60%;">The horizontal axis shows the overall fraction of the population that is a current user of a product. The vertical shows how much this more this product is used by Price Chopper shoppers. Mouse-over the dots the upper right to see the high impact-moderate specificity brands to focus on, and the upper left for moderate impact-high specificity brands that are particularly popular among Price Chopper Shoppers.</p>
	    <br>
	  </div>
	</center>
	<h4>Who are Price Chopper shoppers? </h4>
	<p style="width:60%;">The following lists shows the most unique attributes of Price Chopper shoppers. On the left are attributes positively associated with Price Chopper patrons, and on the right, negatively associated attributes. </p>
	<div style="width:60%;margin:0 auto;height:400px;width:600px;border:1px solid #ccc;overflow:auto;">
	  <ul style="list-style-type:none;">
	    <li>Country of Birth: Serbia and Montenegro (6.8)</li>
	    <li>5th Oldest Child Age: 8 (6.5)</li>
	    <li>Designated Market Area (DMA): Utica (6.5)</li>
	    <li>Designated Market Area (DMA): Binghamton (6.5)</li>
	    <li>Designated Market Area (DMA): Syracuse (6.3)</li>
	    <li>Designated Market Area (DMA): Kansas City (6.2)</li>
	    <li>Designated Market Area (DMA): Albany - Schenectady - Troy (5.9)</li>
	    <li>Designated Market Area (DMA): Saint Joseph (4.6)</li>
	    <li>State of Residence: Kansas (4.2)</li>
	    <li>Designated Market Area (DMA): Watertown (4.1)</li>
	    <li>State of Residence: Vermont (3.7)</li>
	    <li>Designated Market Area (DMA): Topeka (3.7)</li>
	    <li>Designated Market Area (DMA): Burlington - Plattsburgh (3.4)</li>
<li>Source where most recent pet is from: Other (3.4)</li>
	    <li>Profession or job: Other Sales or Sales support role (3.4)</li>
<li>Birth Year: 1976.0 (3.0)</li>
<li>age: 42.0 (3.0)</li>
<li>Birth Year: 1927.0 (2.9)</li>
<li>State of Residence: New York (2.8)</li>
<li>Birth Year: 1940.0 (2.7)</li>
<li>age: 86.0 (2.3)</li>
<li>Profession or job: Sales associate / sales clerk / cashier (2.3)</li>
<li>4th Oldest Child Age: 4 (2.3)</li>
<li>Birth Year: 1931.0 (2.2)</li>
<li>Type of Area Living In: Other (2.1)</li>
<li>Lithuanian (foreign languages spoken): Yes (2.1)</li>
<li>Living with other adult family members, e.g., Grandparents, Cousins, etc.: Yes (2.0)</li>
<li>Tagalog/Filipino: Yes (2.0)</li>
<li>Division: West North Central (1.9)</li>
<li>Type of organization currently working for: Other (1.8)</li>
<li>Number of children under 18 in household: 7.0 (1.8)</li>
<li>Profession or job: Teacher or Professor (1.7)</li>
<li>age: 19.0 (1.7)</li>
<li>Move out of parental home: No (1.7)</li>
<li>age: 64.0 (1.7)</li>
<li>age: 77.0 (1.6)</li>
<li>State of Residence: Missouri (1.6)</li>
<li>Type of Area Living In: Rural area (1.6)</li>
<li>age: 73.0 (1.6)</li>
<li>age: 67.0 (1.5)</li>
<li>age: 59.0 (1.5)</li>
<li>age: 56.0 (1.5)</li>
<li>12 years old: No (1.5)</li>
<li>Birth Year: 1951.0 (1.5)</li>
<li>Division: Middle Atlantic (1.5)</li>
<li>Birth Year: 1952.0 (1.4)</li>
<li>Region: Northeast (1.4)</li>
<li>4th Oldest Child Age: 10 (1.4)</li>
<li>Birth Year: 1954.0 (1.4)</li>
<li>Birth Year: 1999.0 (1.4)</li>
<li>Type of school/university currently working for: Public elementary school (1.3)</li>
<li>2 years old: Yes (1.3)</li>
<li>Birth Year: 1962.0 (1.3)</li>
<li>age: 36.0 (1.3)</li>
<li>Race: White (1.3)</li>
<li>2nd Oldest Child Age: Not Applicable (1.3)</li>
<li>Designated Market Area (DMA): Jonesboro (1.2)</li>
<li>Garden size: Larger than 4 tennis courts (over 10,000 sq ft) (1.2)</li>
<li>Household size (2): 2 (1.2)</li>
<li>Household size (1): 2.0 (1.2)</li>
<li>Profession or job: Clerk (1.2)</li>
<li>Birth Year: 1948.0 (1.2)</li>
<li>Education (Degree subject studied): Yes (1.2)</li>
<li>Prefer not to answer (Life events in the past 12 months): No (1.2)</li>
<li>Pregnant: No (1.2)</li>
<li>Interaction with smarter people: Yes (1.2)</li>
<li>Do you speak Spanish: I can not speak Spanish (1.2)</li>
<li>Kid 2 Gender: Not applicable - I do not have a child under 18 (1.1)</li>
<li>Oldest Child Age: 13 (1.1)</li>
<li>NAICS Industry Code: Non-profit, Community, Religious and Social Service Organizations (1.1)</li>
<li>Move house: No (1.1)</li>
<li>Closer to my family: No (1.1)</li>
<li>Other (Animals (pets or working) owned in household): Yes (1.1)</li>
<li>age: 45.0 (1.1)</li>
<li>Employment Status: Retired (1.1)</li>
<li>Birth Year: 1959.0 (1.1)</li>
<li>Purchase or sell a house/flat: No (1.1)</li>
<li>2nd Oldest Child Age: 16 (1.1)</li>
<li>Birth Year: 1945.0 (1.1)</li>
<li>Kid 1 Gender: Not applicable - I do not have a child under 18 (1.1)</li>
<li>NAICS Industry Code: Education (1.1)</li>
<li>Prefer not to answer (Life events planned in the next 12 months): No (1.1)</li>
<li>None of the above (Life events planned in the next 12 months): Yes (1.1)</li>
<li>Union membership household: Current member (1.1)</li>
<li>Birth Year: 1971.0 (1.0)</li>
<li>To travel: No (1.0)</li>
<li>16: Yes (1.0)</li>
<li>Oldest Child Age: Not Applicable (1.0)</li>
<li>17 years old: Yes (1.0)</li>
<li>Took gap Year/career break: No (1.0)</li>
<li>White: Yes (1.0)</li>
<li>Relationship status: In a relationship and living together (1.0)</li>
<li>Designated Market Area (DMA): Wilkes Barre - Scranton (1.0)</li>
<li>Birth Year: 1998.0 (1.0)</li>
<li>Start college or re-enrol in school: No (1.0)</li>
<li>Generation: Pre-Silent Generation (1927 and earlier) (1.0)</li>
<li>age: 71.0 (1.0)</li>
<li>Fish (including outdoor) (Pets owned in household): Yes (1.0)</li>
<li>Tamil (foreign languages spoken): Yes (1.0)</li>
<li>age: 65.0 (1.0)</li>

	    </ul>

        <!-- Optionally reference your vis JS file here, or define in a script tag -->
        <!-- <script type="text/javascript" src="js/my-vis.js"></script> 
	<script src="lib/d3.v3.min.js" charset="utf-8"></script>
        <script type="text/javascript">

            d3.csv('./pitch_price_chopper.csv', function loadCallback(error, data) {
                data.forEach(function(d) { // convert strings to numbers
                    d.price_chopper_affinity = +d.price_chopper_affinity;
                    d.current_customer_base = +d.current_customer_base;

                });
                makeVis(data);
            });

          var makeVis = function(data) {
              // Common pattern for defining vis size and margins
              var margin = { top: -10, right: 20, bottom: 70, left: 80 },
                  width  = 700 - margin.left - margin.right,
                  height = 600 - margin.top - margin.bottom;

              // Add the visualization svg canvas to the vis-container <div>
              var canvas = d3.select("#vis-container").append("svg")
                  .attr("width",  width  + margin.left + margin.right)
                  .attr("height", height + margin.top  + margin.bottom)
                .append("g")
                  .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

              // Define our scales
              var colorScale = d3.scale.category10();

              var xScale = d3.scale.linear()
                  .domain([ d3.min(data, function(d) { return d.current_customer_base; }) - 1,
                            d3.max(data, function(d) { return d.current_customer_base; }) + 1 ])
                  .range([0, width]);

              var yScale = d3.scale.linear()
                  .domain([ d3.min(data, function(d) { return d.price_chopper_affinity; }) - 0.03,
                            d3.max(data, function(d) { return d.price_chopper_affinity; }) + 0.2 ])
                  .range([height, 0]); // flip order because y-axis origin is upper LEFT

              // Define our axes
              var xAxis = d3.svg.axis()
                  .scale(xScale)
                  .orient('bottom');

              var yAxis = d3.svg.axis()
                  .scale(yScale)
                  .orient('left');

              // Add x-axis to the canvas
              canvas.append("g")
                  .attr("class", "x axis")
                  .attr("transform", "translate(0," + height + ")") // move axis to the bottom of the canvas
                  .call(xAxis)
                .append("text")
                  .attr("class", "label")
                  .attr("x", width/2) // x-offset from the xAxis, move label all the way to the right
                  .attr("y", 56)    // y-offset from the xAxis, moves text UPWARD!
                  .style("text-anchor", "middle") // right-justify text
                  .text("Overall Brand Use");

              // Add y-axis to the canvas
              canvas.append("g")
                  .attr("class", "y axis") // .orient('left') took care of axis positioning for us
                  .call(yAxis)
                .append("text")
                  .attr("class", "label")
                  .attr("transform", "rotate(-90)") // although axis is rotated, text is not
                  .attr("y", -66) // y-offset from yAxis, moves text to the RIGHT because it's rotated, and positive y is DOWN
                  .attr("x", -height/2) // 
                  .style("text-anchor", "middle")
                  .text("Price Chopper Brand Use (Z-score)");

              // Add the tooltip container to the vis container
              // it's invisible and its position/contents are defined during mouseover
              var tooltip = d3.select("#vis-container").append("div")
                  .attr("class", "tooltip")
                  .style("opacity", 0);

              // tooltip mouseover event handler
              var tipMouseover = function(d) {
                  var color = colorScale(d.industry);
                  var html  = d["brand"] + "<br/>" +
              "<span style='color:" + color + ";'>" + d.industry //+ "</span><br/>" +
              //"<b>" + d.current_customer_base + "</b> green, <b/>" + d.price_chopper_affinity + "</b> price_chopper_affinity";

                  tooltip.html(html)
                      .style("left", (d3.event.pageX + 15) + "px")
                      .style("top", (d3.event.pageY - 14) + "px")
                    .transition()
                      .duration(200) // ms
                      .style("opacity", .9) // started as 0!

              };
              // tooltip mouseout event handler
              var tipMouseout = function(d) {
                  tooltip.transition()
                      .duration(300) // ms
                      .style("opacity", 0); // don't care about position!
              };


              // Add data points!


canvas.selectAll(".dot")
.data(data)
.enter().append("circle")
.attr("class", "dot")
.attr("r", 3) // radius size, could map to another data dimension
.attr("cx", function(d) { return xScale( d.current_customer_base + (Math.random()-0.5)*0.2 ); })     // x position
.attr("cy", function(d) { return yScale( d.price_chopper_affinity ); })  // y position
.style("fill", function(d) { return colorScale(d.industry); })
.on("mouseover", tipMouseover)
.on("mouseout", tipMouseout);




//var line = d3.svg.line()
//    .x(function(d) { return xScale(d.current_customer_base); })
//    .y(function(d) { console.log(d.fit);return yScale(d.fit); });

//  canvas.append("path")
//      .datum(data)
//      .attr("class", "line")
//      .attr("d", line);



          };
        </script> -->

	  
	</div>
    </body>
</html>
